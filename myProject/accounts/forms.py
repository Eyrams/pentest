#définir le formulaire que nous allons utiliser qui récupere les valeurs

from django.contrib.auth.forms import UserCreationForm, UserChangeForm
from django import forms
from django.core.validators import RegexValidator
from django.contrib.auth.validators import UnicodeUsernameValidator

from .models import *

class UploadFileForm(forms.ModelForm):
    def _init_(self, *args, **kwargs):
        super()._init_(*args, **kwargs)
        self.fields['file_to_sign'].widget.attrs.update(
            {
                "class":"form-control",
                "accept": ".pdf",
                "onchange": "previewPdf(event)",
                "style": "opacity: 0;",
                # "type": "file",
             })
        self.fields['user'].widget.attrs.update(
            {
                "class":"form-control",
                "type": "hidden",
             })
    class Meta:
        model = File
        fields = ['user', 'file_to_sign']

class SignatoriesCreationForm(forms.Form):
    class Meta:
        model = SignatureUser
        fields = ["first_name", "last_name", "email", "image_signature", "username"]


class SignatoriesChangeForm(UserChangeForm):
    class Meta:
        model = SignatureUser
        fields = ["first_name", "last_name", "email", "image_signature", "username"]


class RegisterForm(forms.ModelForm):
    """Formulaire de complétion d'information d'un client"""
    contrat = forms.BooleanField(
        required=True,
        widget=forms.CheckboxInput(
            attrs={"class": "custom-control-input", "checked": False, "required": True}
        )
    )
    def _init_(self, *args, **kwargs):
        super()._init_(*args, **kwargs)
        self.fields['first_name'].widget.attrs.update({"class":"form-control", "placeholder":"First Name", "name": "first_name"})
        self.fields['last_name'].widget.attrs.update({"class":"form-control", "placeholder":"Last Name", "name": "last_name"})
        self.fields['email'].widget.attrs.update(
            {
                "class":"form-control",
                "placeholder":"Your Email",
                "id" : "email",
                "name": "email"

            })
        self.fields['image_signature'].widget.attrs.update(
            {
                "class":"form-control",
                "placeholder":"Image",
                "accept": "image/*",
                "onchange": "previewImage(event)",
                "style": "opacity: 0;",
                "id" : "id_image",
                "name": "image_signature"
             })
        self.fields['username'].widget.attrs.update(
            {
                "class":"form-control",
                "placeholder":"National ID Card Number",
                "id" : "id_card",
                "name" : "username"

                })
        self.fields['contrat'].widget.attrs.update({"class":"form-control"})

    class Meta:
        model = SignatureUser
        fields =  ["first_name", "last_name", "email", "image_signature", "username"]